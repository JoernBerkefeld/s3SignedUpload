$.fn.uploadHandler=function(o){function e(e){for(var t,a=e.length,r=0;a>r;r++)t=e[r],$.ajax({url:o,data:"file="+t.name+"&mime="+t.type,type:"GET",dataType:"json",cache:!1}).done(function(o){o.error?console.error(o.error):n(t,o.url)}).fail(function(o){console.error("S3 Upload not supported",o)})}function n(o,e){$.ajax({url:e,type:"PUT",data:o,dataType:"text",cache:!1,contentType:o.type,processData:!1}).done(function(){var o=e.split("?")[0].substr(6);console.info("s3-upload done: ",o)}).fail(function(o){console.error("s3-upload failed",o)})}var t=this,a=t[0];a.onchange=function(){this.files.length&&e(this.files)}};